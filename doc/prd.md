# 学习英语单词 H5 项目 PRD（学习卡片）

## 1. 产品目标
- 通过简洁的卡片式交互，帮助用户随时随地学习英语单词。
- 支持登录后同步学习进度，未登录也可浏览单词书目录，点击学习时引导登录/注册。
- 底部 2 个 Tab：主页、我的，符合移动端 H5 使用习惯。

## 2. 用户与场景
- 学习者（Primary）：利用碎片时间学习单词，关注简单、直达、不中断。
- 典型场景：
  - 闲暇时打开首页，继续上次的单词书学习。
  - 首次使用浏览单词书目录，选择一本开始学习，系统提示登录/注册并同步进度。
  - 在我的页面查看邮箱、学习进度；可退出登录。

## 3. 信息架构与导航
- 底部 Tab：
  - 首页：展示最近学习（已登录时）与所有单词书列表；未登录仅展示所有单词书。
  - 我的：展示用户信息（邮箱）、总学习进度汇总、退出登录；未登录时支持登录/注册弹窗。

线框（底部 Tab 通用）：
```
┌──────────────────────────────────┐
│              顶部栏             │（可选：显示标题“学习卡片”）
├──────────────────────────────────┤
│             页面内容             │
│                                  │
│                                  │
├──────────────────────────────────┤
│  首页（选中）     我的            │（底部 Tab 固定）
└──────────────────────────────────┘
```

## 4. 页面需求

### 4.1 首页（已登录）
- 模块：
  1) 最近学习（仅已登录显示）：展示最近学习的单词书（至少 1 本），显示封面/标题/进度；点击进入继续学习流程。
  2) 所有单词书：按网格或列表展示全部单词书，可滚动加载。
- 线框：
```
┌──────────────────────────────────┐
│ 最近学习                         │
│ [封面] 书名A   进度 35%  [继续]  │ → 点击进入继续学习（定位到上次单词的下一个）
│ [封面] 书名B   进度 10%  [继续]  │
├──────────────────────────────────┤
│ 所有单词书                       │
│ [封面] 书名C   单词数 N          │ → 点击进入学习页（如无进度则从第1个）
│ [封面] 书名D   单词数 N          │
│  ...（可滚动）                   │
├──────────────────────────────────┤
│  首页（选中）     我的            │
└──────────────────────────────────┘
```

### 4.2 首页（未登录）
- 模块：
  - 仅展示“所有单词书”。
  - 用户点击任何单词书，将跳转到“我的”Tab，并在“我的”页自动弹出登录/注册弹窗。
- 线框：
```
┌──────────────────────────────────┐
│ 所有单词书                       │
│ [封面] 书名C   单词数 N          │ → 点击后切换到“我的”并弹出登录框
│ [封面] 书名D   单词数 N          │
│  ...                              │
├──────────────────────────────────┤
│  首页（选中）     我的            │
└──────────────────────────────────┘
```

### 4.3 我的
- 已登录：
  - 显示用户邮箱（只读）。
  - 学习进度汇总：如“已学习 X 本书 | Y 个单词（或百分比）”。
  - 退出登录按钮。
- 未登录：
  - 默认展示“登录/注册”入口按钮；
  - 支持在进入该页时自动弹出登录弹窗（由首页点击单词书触发或用户主动进入）。
- 线框：
```
┌──────────────────────────────────┐
│ 我的                             │
│ 邮箱：user@example.com           │（未登录时为空）
│ 学习进度：已学 X 本 | Y 个单词   │
│ [退出登录] / [登录或注册]        │（根据状态显示）
├──────────────────────────────────┤
│  首页             我的（选中）    │
└──────────────────────────────────┘
```

### 4.4 登录/注册弹窗（Popup）
- 触发：
  - 未登录用户在首页点击任何单词书时；
  - 用户进入“我的”页时主动点击“登录/注册”按钮，或由首页引导自动弹出。
- 表单：邮箱、密码；支持“登录”和“注册”两种动作。
- 结果：
  - 登录成功：关闭弹窗，完成来源动作（若来自首页点击单词书，完成登录后直接进入该书的学习页）。
  - 注册成功：自动登录或引导登录，流程一致。
- 线框：
```
┌────────── 登录 / 注册 ──────────┐
│ 邮箱： [______________]         │
│ 密码： [______________]         │
│ [ 登录 ] [ 注册 ]               │
│ 轻提示/错误信息                 │
└────────────────────────────────┘
```

### 4.5 单词学习页（卡片式）
- 进入规则：
  - “继续学习”：从“最近学习的单词的下一个”开始。
  - 首次学习某书：从第 1 个单词开始。
- 卡片展示（尽可能简单，每卡只展示一个单词的关键信息）：
  - 推荐字段：`word.wordHead`（单词本身）、`ukphone`/`usphone`、`trans[0].tranCn`（首义项）、可选展示一条例句 `sentence.sentences[0]`。
  - 操作区：`[上一个] [下一个]`、`[查看详情]`；点击卡片任意区域亦可进入详情。
  - 进度提示：当前索引/总数。
- 线框：
```
┌──────────────────────────────────┐
│ 书名A   进度 12/500              │
│ ┌────────────────────────────┐  │
│ │           old               │  │ ← wordHead
│ │  UK /əʊld/  US /old/        │  │ ← ukphone/usphone
│ │  释义：老的（首义项）        │  │ ← trans[0].tranCn
│ │  例句：a pair of old shoes  │  │ ← 可选句子
│ └────────────────────────────┘  │
│ [上一个]      [查看详情]      [下一个] │
├──────────────────────────────────┤
│  首页             我的            │
└──────────────────────────────────┘
```

### 4.6 单词详情页
- 展示单词完整信息（来自提供的 JSON 结构）：
  - 基本：`wordHead`，`ukphone`，`usphone`；
  - 释义：`trans`（含中释、英释）；
  - 同近：`syno`；
  - 短语：`phrase`；
  - 同根：`relWord`；
  - 例句：`sentence`；
  - 其他：`ukspeech`，`usspeech`（可选显示）。
- 支持返回上一张卡片。
- 线框：
```
┌──────────────────────────────────┐
│ old   UK /əʊld/  US /old/       │
│ ─ 释义（中/英）                  │
│   - 老的；...                    │
│ ─ 同近（syno）                   │
│   - adj: ancient / aged / ...   │
│ ─ 短语（phrase）                 │
│   - of old / old man / ...      │
│ ─ 同根（relWord）                │
│   - olden / oldness / ...       │
│ ─ 例句（sentence）               │
│   - a pair of old shoes ...     │
│ [返回卡片]                       │
├──────────────────────────────────┤
│  首页             我的            │
└──────────────────────────────────┘
```

## 5. 数据与状态

### 5.1 数据模型（示例）
- 用户 User：`{ id, email, createdAt }`
- 单词书 Book：`{ id, title, cover, wordCount, updatedAt }`
- 单词 Word：与给定 JSON 结构一致（包含 `wordHead`、`content` 等）。
- 学习进度 Progress：`{ userId, bookId, lastIndex, updatedAt }`
  - `lastIndex`：最近学习到的单词索引（从 0 开始），下一次进入时从 `lastIndex + 1` 开始。

### 5.2 进度与“最近学习”规则
- 进入“继续学习”时，从 `lastIndex + 1` 开始；若超出总数，提示“本书已学完”，可选择从头复习。
- 完成一次“下一个”时，写入进度：`lastIndex = 当前索引`。
- “最近学习”按 `Progress.updatedAt` 倒序取最近 N 本（如 3 本）。

## 6. 接口需求（示例定义）
- 认证
  - `POST /api/auth/login`：{ email, password } → 200 登录成功 / 4xx 失败。
  - `POST /api/auth/register`：{ email, password } → 200 创建并登录。
  - `POST /api/auth/logout`：退出登录。
  - `GET /api/user/me`：返回当前用户信息与进度汇总。
- 单词书
  - `GET /api/books`：返回所有书 `{ id, title, cover, wordCount }[]`（分页可选）。
  - `GET /api/books/:id`：返回书详情与目录（可选）。
- 学习与进度
  - `GET /api/user/recent`：返回最近学习书目与进度。
  - `GET /api/books/:id/word?index=x`：返回第 x 个单词。
  - `POST /api/learn/progress`：{ bookId, index }，记录当前学习到的索引。

## 7. 交互与状态处理
- 未登录行为：
  - 首页点击书籍 → 切换到“我的” → 自动弹出登录/注册弹窗。
  - 登录/注册成功 → 返回原意图（进入学习页）。
- 学习页：
  - 上一张/下一张切换，节流处理避免重复提交；下一张时更新进度。
  - 到达边界：首张禁用“上一个”，末张点击“下一个”提示“已学完”。
- 轻提示：登录状态变化、进度保存成功/失败、网络异常。

## 8. 埋点（可选）
- 事件：
  - `open_app`、`view_home`、`view_my`、`open_book`、`start_learning`、`next_word`、`prev_word`、`view_detail`、`login_success`、`register_success`、`logout`。
- 字段：用户 id、bookId、wordIndex、时间戳、来源页。

## 9. 非功能需求
- 适配：移动端优先，自适应常见 iPhone/安卓机型；横竖屏以竖屏为主。
- 性能：首屏 < 2s（4G 网络参考），列表懒加载、图片占位与压缩。
- 可用性：关键按钮触控面积 ≥ 44x44；状态清晰可见。
- 安全：密码加密传输；登录态管理（Cookie/Token）。

## 10. 验收标准
- 底部仅 2 个 Tab，交互与路由正确切换。
- 首页：
  - 已登录显示“最近学习”并可一键继续；
  - 未登录仅显示“所有单词书”，点击书籍会跳到“我的”并弹出登录；
  - 所有单词书可滚动浏览。
- 我的：
  - 已登录显示邮箱、进度汇总、退出按钮可正常退出；
  - 未登录可弹出登录/注册并完成登录。
- 学习页：
  - 从“最近学习的下一个”进入；
  - 单词卡片简单清晰，上一张/下一张正常，进度记录准确；
  - 可进入详情页并展示完整信息。

## 11. 风险与边界
- 单词数据体量大时的加载与分页策略需要预研（按书/按块分片）。
- 进度只记录“最后索引”，更细粒度的熟悉度（如间隔重复）可作为后续迭代。
- 未登录用户是否允许临时本地进度（本地缓存）待决策；当前方案为强制登录同步。

—— 文档版本：v1.0（用于初始开发对齐与评审）

